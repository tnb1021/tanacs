学籍番号:70710056
氏名:田辺雄大
選択した課題:課題B1
課題の達成状況:

実装した機能はデータベースの検索、編集、削除、追加、入力した住所のマップ表示を行うWebページである。
今回作成した作品のテーマは「ユーザで作り上げる静岡県の観光地検索サイト」である。
具体的にはユーザにデータベースを編集する権限があり、ユーザにデータベースの設計を委託している。
よりデータベースのカラムを増やしてジャンル別や地域別などの出力も実装したかったが、今回のテーマの都合上多くの手間がかかってしまい時間が足りなかったため実装しなかった。

使用言語:PHP7.0、Mysql8.0

・検索
検索欄として場所と住所を入力するものを用意してある。双方部分検索としておりキーワード検索に対応している。
両方入力することでand検索としているのでより絞った検索システムとなっている。

・編集
編集欄としても編集したい場所と住所を入力するものを用意してある。編集したい場所を欄に入力し、どの住所に編集をしたいかを住所欄に入力することで編集が可能である。

・削除
削除する観光地名欄に削除したい場所を入力することでデータベースから削除することが可能である。

・データ追加
入力欄として場所と住所を入力するものを用意してある。この欄にデータベースに登録したい場所と住所を入力する。

・住所検索
入力欄として住所を入力するものを用意してある。この欄にマップ表示したい住所をデータベースからコピペし、入力した住所の緯度経度と地図を表示する。

以上が主な機能である。ページ内には逐一ページ内移動リンクを設けてある。
以下に具体的なプログラム設計方法を記す。

・事前のデータベース処理
今回のコンセプトは「ユーザで作り上げる静岡県の観光地検索サイト」であるため、あらかじめ多くのデータを入れておく必要はない。
故に場所名と住所のカラムを持つデータベースを作成しておく。データベース名、テーブル名共にnpとする。カラム名として観光地名をname、住所をlocateとする。

・検索(model.php)
検索欄にユーザによって文字が入力された時、
select * from np where name like '%ユーザ入力%' AND locate like '%ユーザ入力%'とすることで部分検索(キーワード検索)を実装している。

・編集(edit.php)
ユーザに編集したい名所と新しい住所を入力させている。
update np set locate = 'ユーザ入力' where name = 'ユーザ入力'

・削除(delete.php)
ユーザに削除したい名所を入力させている。
delete from np where name = 'ユーザ入力'

・追加(insert.php)
ユーザに追加したい名所と住所を入力させている。
insert into np values ("ユーザ入力,ユーザ入力")

・住所検索(緯度経度取得はgps.php)
ユーザにマップ表示させたい住所を入力させている。
http://www.geocording.jp/api/を用いて入力住所から緯度、経度をxmlで出力させている。

・ページ全体(index.php)
ページ構成の多くは参考文献を参考にした。
include_once()でデータ取得プログラムを呼び出す。cssとしては今回、Bootstrapを読み込む。
マップ表示はGoogleAPIを使用する。gps.phpにおいて取得した緯度経度を用いて座標を指定し、マップを表示させている。
_GETによってURLで情報の受け渡しを行っている。

以下、一通りの実行方法を記載する。(Windowsで実装したためWindowsにおける実行方法)
1.データベースを作成する。
2.テーブルを作成する。(テーブル情報は上記の通り)
3.各ファイルを/Apache24/htdocsに置く。
4.各ファイルのデータベース名、カラム名をそれぞれ対応するように変更する。
5.http://localhost/index.phpにアクセスする。
6.データを追加するためにデータの追加の場所へ追加したいデータを入力して追加をクリックする。必要分だけ6を繰り返す。
7.編集したい/削除したいデータがある場合、適宜入力して削除する。
8.検索したいデータを入力し、結果が正常に出力されれば成功である。
9.マップ表示させたい住所を検索結果からコピーし、入力欄にペーストして検索をかけ正しくマップが表示されれば成功である。

感想
正直、課題を参照した時に情報科学実験Ⅰとやっていることがほぼ同じであったためこの課題を選択したが、これでは自分の力にはならないためマップ表示などを既知なものでなく、
未知であるものと仮定し、新しいAPIを用いて緯度経度の取得とマップ表示を試みた。結果は上手くいったが便利さという観点からすると満足はいかなかった。
phpに触れてから二カ月ほどしかたっていないためエラー文にも慣れないものが多くデバックに苦労した。しかしWebシステムは成果物が目に見えるものが多く、モチベーションを保つことには苦労しなかった。
データを多く追加する必要があり、お手を煩わせるのも大変申し訳ないので実行結果のスクリーンショットを添付します。(〇〇.PNGが実行前、〇〇2.PNGが実行後です。)
勝手に自分でテーマを決めてしまいすみませんでした。

参考文献
https://qiita.com/_Cierra_Neko_/items/4ec178701cafdccac381
https://www.suzuco.net/entry/php-search/



